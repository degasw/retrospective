"use strict";angular.module("retrospectiveApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"partials/main",controller:"MainCtrl"}).when("/issues/new",{templateUrl:"partials/issues/new",controller:"IssuesCtrl"}).when("/issues/list",{templateUrl:"partials/issues/list",controller:"IssuesCtrl"}).when("/issues/comments",{templateUrl:"partials/issues/comment",controller:"CommentsCtrl"}).when("/reports",{templateUrl:"partials/reports/ranking",controller:"ReportsCtrl"}).when("/issues/confirm",{templateUrl:"partials/issues/confirm",controller:"VotesCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("retrospectiveApp").controller("MainCtrl",["$scope","$http",function(a,b){b.get("/api/awesomeThings").success(function(b){a.awesomeThings=b})}]),angular.module("retrospectiveApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"},{title:"Issues",link:"/issues/list"},{title:"Reports",link:"/reports"}],a.isActive=function(a){return a===b.path()}}]),angular.module("retrospectiveApp").controller("IssuesCtrl",["$scope","$http","$location","IssueService","VotesService",function(a,b,c,d,e){a.init=function(){a.voteList=[],a.voteSubmitted=!1,f()};var f=function(){d.list().success(function(b){a.issues=b}).error(function(a){console.log(a)})};a.cancel=function(){a.voteSubmitted=!1,c.url("/")},a.create=function(){b.post("/api/issue",{issue:a.issue}).success(function(){c.url("/issues/list")}).error(function(a){console.log(a)})},a.addToVoteList=function(b){_.contains(a.voteList,b._id)&&_.remove(a.voteList,b._id),a.voteList.push(b)},a.submitVotes=function(){e.add(a.voteList),a.voteSubmitted=!0,c.url("/issues/confirm")},a.comment=function(a){d.set(a),c.url("/issues/comments")},a.commentCount=function(a){return a.comments.length}}]),angular.module("retrospectiveApp").controller("CommentsCtrl",["$scope","$location","IssueService",function(a,b,c){a.init=function(){a.issue=c.get()};var d=function(){a.comment=""},e=function(){b.url("/issues/list")};a.add=function(){a.issue.comments.push(a.comment),d()},a.done=function(){c.set(a.issue),c.update(),e()},a.cancel=function(){e()},a.init()}]),angular.module("retrospectiveApp").controller("ReportsCtrl",["$scope","$http","$location","IssueService",function(a,b,c,d){a.init=function(){b.get("/api/reports/ranking").success(function(b){a.votes=b}).error(function(a){console.log(a)})},a.viewProposals=function(){d.set(issue),c.url("/issues/comments")},a.cancel=function(){c.url("/")},a.init()}]),angular.module("retrospectiveApp").controller("VotesCtrl",["$scope","$location","VotesService","IssueService",function(a,b,c){function d(){a.voteList=c.list()}a.init=function(){a.voteSaved=!1,d()},a.saveVotes=function(){c.save().then(function(){a.voteSaved=!0,console.log(a.voteSaved)})},a.cancel=function(){b.url("/issues/list")},a.init()}]),angular.module("retrospectiveApp").factory("IssueService",["$http",function(a){var b={};return{get:function(){return b},set:function(a){b=a},update:function(){a.put("/api/issue",{issue:b}).success(function(){}).error(function(a){console.log(a)})},list:function(){return a.get("/api/issue")}}}]),angular.module("retrospectiveApp").factory("VotesService",["$http",function(a){var b;return{add:function(a){b=a},list:function(){return b},save:function(){return a.post("/api/vote",{issues:b})}}}]);